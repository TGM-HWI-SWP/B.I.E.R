{% extends "layout.html" %}

{% block title %}Dashboard – B.I.E.R{% endblock %}
{% block page_title %}Dashboard{% endblock %}
{% block page_subtitle %}Überblick über das gesamte Lager{% endblock %}

{% block content %}
<!-- Stat cards -->
<div class="row g-4 mb-5">
  <div class="col-md-4">
    <div class="card stat-card shadow-sm h-100">
      <div class="card-body d-flex align-items-center gap-3">
        <div class="icon"><i class="bi bi-box-seam"></i></div>
        <div>
          <div class="value">{{ num_produkte }}</div>
          <div class="text-muted fw-600">Produkte</div>
        </div>
      </div>
      <div class="card-footer bg-transparent border-0">
        <a href="/produkte" class="btn btn-sm btn-outline-primary">Alle anzeigen</a>
      </div>
    </div>
  </div>

  <div class="col-md-4">
    <div class="card stat-card shadow-sm h-100">
      <div class="card-body d-flex align-items-center gap-3">
        <div class="icon"><i class="bi bi-building"></i></div>
        <div>
          <div class="value">{{ num_lager }}</div>
          <div class="text-muted">Lager</div>
        </div>
      </div>
      <div class="card-footer bg-transparent border-0">
        <a href="/lager" class="btn btn-sm btn-outline-primary">Alle anzeigen</a>
      </div>
    </div>
  </div>

  <div class="col-md-4">
    <div class="card stat-card shadow-sm h-100">
      <div class="card-body d-flex align-items-center gap-3">
        <div class="icon"><i class="bi bi-stack"></i></div>
        <div>
          <div class="value">{{ total_menge }}</div>
          <div class="text-muted">Einheiten gesamt</div>
        </div>
      </div>
      <div class="card-footer bg-transparent border-0">
        <a href="/inventar" class="btn btn-sm btn-outline-primary">Inventar öffnen</a>
      </div>
    </div>
  </div>
</div>

<!-- Warehouse quick-view -->
{% if lager_list %}
<div class="card section-card">
  <div class="card-header">
    <i class="bi bi-building me-2"></i>Lagerliste
  </div>
  <div class="card-body p-0">
    <table class="table table-hover mb-0">
      <thead class="table-light">
        <tr>
          <th>Name</th>
          <th>Adresse</th>
          <th>Max. Plätze</th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        {% for l in lager_list %}
        <tr>
          <td class="fw-semibold">{{ l.lagername }}</td>
          <td class="text-muted">{{ l.adresse }}</td>
          <td>{{ l.max_plaetze }}</td>
          <td>
            <a href="/inventar/{{ l._id }}" class="btn btn-sm btn-outline-primary">
              <i class="bi bi-clipboard-data me-1"></i>Inventar
            </a>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% else %}
<div class="alert alert-info">
  Noch keine Lager angelegt. <a href="/lager" class="alert-link">Jetzt anlegen</a>.
</div>
{% endif %}
{% endblock %}
